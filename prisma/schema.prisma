// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL_DEVELOPMENT")
    relationMode = "prisma"
}

generator client {
    provider = "prisma-client-js"
}

model Website {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    userId    String
    url       String
    subUrl    String
}

model User {
    id             String @id
    websiteUrl     String @db.VarChar(255)
    email          String @unique @db.VarChar(255)
    groomFirstName String
    groomLastName  String
    brideFirstName String
    brideLastName  String
}

model Household {
    id     String  @id @default(cuid())
    userId String
    guests Guest[]
}

model Guest {
    id          Int          @id @default(autoincrement())
    firstName   String
    lastName    String
    householdId String
    address1    String?
    address2    String?
    city        String?
    state       String?
    zipCode     String?
    country     String?
    phone       String?
    email       String?
    notes       String?
    userId      String
    household   Household    @relation(fields: [householdId], references: [id])
    invitations Invitation[]

    @@index([householdId])
}

model Event {
    id          String       @id @default(cuid())
    name        String
    date        DateTime?    @db.Date
    startTime   String?
    endTime     String?
    venue       String?
    attire      String?
    description String?
    userId      String
    invitations Invitation[]
}

model Invitation {
    guest     Guest?   @relation(fields: [guestId], references: [id])
    guestId   Int
    event     Event?   @relation(fields: [eventId], references: [id])
    eventId   String
    invitedAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    rsvp      String?
    userId    String

    @@id([guestId, eventId])
    @@index([guestId])
    @@index([eventId])
}
